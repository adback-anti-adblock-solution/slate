
<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>API Reference</title>

    <style>
      .highlight table td { padding: 5px; }
.highlight table pre { margin: 0; }
.highlight .gh {
  color: #999999;
}
.highlight .sr {
  color: #f6aa11;
}
.highlight .go {
  color: #888888;
}
.highlight .gp {
  color: #555555;
}
.highlight .gs {
}
.highlight .gu {
  color: #aaaaaa;
}
.highlight .nb {
  color: #f6aa11;
}
.highlight .cm {
  color: #75715e;
}
.highlight .cp {
  color: #75715e;
}
.highlight .c1 {
  color: #75715e;
}
.highlight .cs {
  color: #75715e;
}
.highlight .c, .highlight .cd {
  color: #75715e;
}
.highlight .err {
  color: #960050;
}
.highlight .gr {
  color: #960050;
}
.highlight .gt {
  color: #960050;
}
.highlight .gd {
  color: #49483e;
}
.highlight .gi {
  color: #49483e;
}
.highlight .ge {
  color: #49483e;
}
.highlight .kc {
  color: #66d9ef;
}
.highlight .kd {
  color: #66d9ef;
}
.highlight .kr {
  color: #66d9ef;
}
.highlight .no {
  color: #66d9ef;
}
.highlight .kt {
  color: #66d9ef;
}
.highlight .mf {
  color: #ae81ff;
}
.highlight .mh {
  color: #ae81ff;
}
.highlight .il {
  color: #ae81ff;
}
.highlight .mi {
  color: #ae81ff;
}
.highlight .mo {
  color: #ae81ff;
}
.highlight .m, .highlight .mb, .highlight .mx {
  color: #ae81ff;
}
.highlight .sc {
  color: #ae81ff;
}
.highlight .se {
  color: #ae81ff;
}
.highlight .ss {
  color: #ae81ff;
}
.highlight .sd {
  color: #e6db74;
}
.highlight .s2 {
  color: #e6db74;
}
.highlight .sb {
  color: #e6db74;
}
.highlight .sh {
  color: #e6db74;
}
.highlight .si {
  color: #e6db74;
}
.highlight .sx {
  color: #e6db74;
}
.highlight .s1 {
  color: #e6db74;
}
.highlight .s {
  color: #e6db74;
}
.highlight .na {
  color: #a6e22e;
}
.highlight .nc {
  color: #a6e22e;
}
.highlight .nd {
  color: #a6e22e;
}
.highlight .ne {
  color: #a6e22e;
}
.highlight .nf {
  color: #a6e22e;
}
.highlight .vc {
  color: #ffffff;
}
.highlight .nn {
  color: #ffffff;
}
.highlight .nl {
  color: #ffffff;
}
.highlight .ni {
  color: #ffffff;
}
.highlight .bp {
  color: #ffffff;
}
.highlight .vg {
  color: #ffffff;
}
.highlight .vi {
  color: #ffffff;
}
.highlight .nv {
  color: #ffffff;
}
.highlight .w {
  color: #ffffff;
}
.highlight {
  color: #ffffff;
}
.highlight .n, .highlight .py, .highlight .nx {
  color: #ffffff;
}
.highlight .ow {
  color: #f92672;
}
.highlight .nt {
  color: #f92672;
}
.highlight .k, .highlight .kv {
  color: #f92672;
}
.highlight .kn {
  color: #f92672;
}
.highlight .kp {
  color: #f92672;
}
.highlight .o {
  color: #f92672;
}
    </style>
    <link href="stylesheets/screen.css" rel="stylesheet" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" media="print" />
      <script src="javascripts/all.js"></script>
  </head>

  <body class="index" data-languages="[&quot;php&quot;,&quot;python&quot;,&quot;java&quot;,&quot;shell&quot;,&quot;twig&quot;]">
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="toc-wrapper">
      <img src="images/logo.png" class="logo" alt="Logo" />
        <div class="lang-selector">
              <a href="#" data-language-name="php">php</a>
              <a href="#" data-language-name="python">python</a>
              <a href="#" data-language-name="java">java</a>
              <a href="#" data-language-name="shell">shell</a>
              <a href="#" data-language-name="twig">twig</a>
        </div>
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc" class="toc-list-h1">
          <li>
            <a href="#introduction" class="toc-h1 toc-link" data-title="Introduction">Introduction</a>
          </li>
          <li>
            <a href="#how-it-works" class="toc-h1 toc-link" data-title="How it works ?">How it works ?</a>
          </li>
          <li>
            <a href="#implement-adback-tags" class="toc-h1 toc-link" data-title="Implement AdBack tags !">Implement AdBack tags !</a>
              <ul class="toc-list-h2">
                  <li>
                    <a href="#1-get-script-names-and-url" class="toc-h2 toc-link" data-title="Implement AdBack tags !">1) Get script names and URL</a>
                  </li>
                  <li>
                    <a href="#2-analytics-script" class="toc-h2 toc-link" data-title="Implement AdBack tags !">2) Analytics script</a>
                  </li>
                  <li>
                    <a href="#3-message-script" class="toc-h2 toc-link" data-title="Implement AdBack tags !">3) Message script</a>
                  </li>
                  <li>
                    <a href="#4-autopromo-banner-script" class="toc-h2 toc-link" data-title="Implement AdBack tags !">4) Autopromo banner script</a>
                  </li>
                  <li>
                    <a href="#5-product-flow-script" class="toc-h2 toc-link" data-title="Implement AdBack tags !">5) Product flow script</a>
                  </li>
              </ul>
          </li>
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.adback.co/en/register/'>Sign Up for a Developer token</a></li>
            <li><a href='https://www.adback.co/en/admin/api/'>Claim your token here, must be logged</a></li>
            <li><a href='https://github.com/tripit/slate'>Documentation Powered by Slate</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        <h1 id='introduction'>Introduction</h1>
<p>Welcome to the AdBack API documentation! You can use our API to access AdBack API endpoints, which can get non blockable URL and names for your analytics tags.</p>

<p>We have language bindings in PHP, Shell, Ruby, Java, and Python! You can view code examples in the dark area to the right, and you can switch the programming language of the examples with the tabs in the top right.</p>
<h1 id='how-it-works'>How it works ?</h1>
<p>What&#39;s the utility of the API? How it works ?</p>

<p>AdBlock lists are updated regularly so domains or scripts can be blocked in a very untimely manner.</p>

<p>The API gives a possibility to provide you with functioning domains and scripts in real time. Our system daily verifies the validity of domains and scripts we provide and in case of blocking, automatically allocates the new ones.</p>

<p>Therefore the implementation of the API script has to be done only once and then operates totally autonomously.</p>

<p><img src="images/how.png" alt="AdBack schema" /></p>
<h1 id='implement-adback-tags'>Implement AdBack tags !</h1><h2 id='1-get-script-names-and-url'>1) Get script names and URL</h2>
<blockquote>
<p>Here is a sample script:</p>
</blockquote>
<pre class="highlight php tab-php"><code>
<span class="cp">&lt;?php</span>

<span class="cm">/* here we use redis to cache api requests */</span>
<span class="nv">$cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Redis</span><span class="p">();</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">'host'</span><span class="p">);</span>

<span class="nv">$scriptElements</span> <span class="o">=</span> <span class="nb">json_decode</span><span class="p">(</span><span class="nb">file_get_contents</span><span class="p">(</span><span class="s1">'https://adback.co/api/script/me?access_token=[token]'</span><span class="p">),</span> <span class="kc">true</span><span class="p">);</span>
<span class="sd">/** @var array $scriptElements */</span>
<span class="k">foreach</span> <span class="p">(</span><span class="nv">$scriptElements</span> <span class="k">as</span> <span class="nv">$key</span> <span class="o">=&gt;</span> <span class="nv">$value</span><span class="p">)</span> <span class="p">{</span>
    <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">hSet</span><span class="p">(</span><span class="s1">'scriptElement'</span><span class="p">,</span> <span class="nv">$key</span><span class="p">,</span> <span class="nv">$value</span><span class="p">);</span>
<span class="p">}</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">expire</span><span class="p">(</span><span class="s1">'scriptElement'</span><span class="p">,</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">60</span> <span class="o">*</span> <span class="mi">6</span><span class="p">);</span>

</code></pre><pre class="highlight python tab-python"><code><span class="n">wip</span>
</code></pre><pre class="highlight java tab-java"><code><span class="n">wip</span>
</code></pre><pre class="highlight shell tab-shell"><code>
<span class="c"># curl command</span>

curl -X <span class="s2">"GET"</span> <span class="s1">'https://adback.co/api/script/me?access_token=[token]'</span>

</code></pre><pre class="highlight twig tab-twig"><code>    # Launch the Symfony command to refesh the tags

    $ php app/console adback:api-client:refresh-tag
</code></pre>
<blockquote>
<p>The above API call returns JSON structured like this:</p>
</blockquote>
<pre class="highlight json tab-json"><code><span class="p">{</span><span class="w">
  </span><span class="s2">"analytics_domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.url.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"analytics_script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scriptname"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message_domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.url.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"message_script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scriptname"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"autopromo_banner_domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.url.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"autopromo_banner_script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scriptname"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"product_domain"</span><span class="p">:</span><span class="w"> </span><span class="s2">"example.url.com"</span><span class="p">,</span><span class="w">
  </span><span class="s2">"product_script"</span><span class="p">:</span><span class="w"> </span><span class="s2">"scriptname"</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>AdBack provide 4 different scripts that you can generate and display from your server.</p>

<p>Here is the fist step to implement AdBack solution.</p>

<p>Call AdBack API to get script names and URL, store it in your preferred local cache provider.</p>
<h3 id='code-logic'>Code logic:</h3>
<ul>
<li><p>connect to your cache provider to limit api calls (here Redis)</p></li>
<li><p>call AdBack API to get tags information&#39;s </p></li>
<li><p>Cache all information</p></li>
<li><p>set cache expiry time to 6 hours</p></li>
</ul>
<h3 id='http-request'>HTTP Request</h3>
<p><code>GET https://adback.co/api/script/me</code></p>
<h3 id='query-parameters'>Query Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>access_token</td>
<td>Yes</td>
<td>Personal token for authentication, <a href="https://www.adback.co/en/admin/api/">here</a> your can get your token</td>
</tr>
</tbody></table>

<aside class="notice">
If API doesn't return all script names or URL, please check your configuration <a href="https://www.adback.co/en/integration/admin/activation">here</a> and make sure all tags are activated.
</aside>

<aside class="warning">You should setup cron task or service to reenesh tag every 6 hours</aside>
<h2 id='2-analytics-script'>2) Analytics script</h2>
<blockquote>
<p>generate analytics script from cache:</p>
</blockquote>
<pre class="highlight php tab-php"><code>
<span class="cp">&lt;?php</span>

<span class="cm">/* here we use redis to cache api requests */</span>
<span class="nv">$cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Redis</span><span class="p">();</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">'host'</span><span class="p">);</span>

<span class="nv">$analyticsScriptCode</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">'scriptElement'</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$scriptElements</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">hGetAll</span><span class="p">(</span><span class="s1">'scriptElement'</span><span class="p">);</span>
    <span class="nv">$analyticsDomain</span> <span class="o">=</span> <span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'analytics_domain'</span><span class="p">];</span>
    <span class="nv">$analyticsScript</span> <span class="o">=</span> <span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'analytics_script'</span><span class="p">];</span>

    <span class="nv">$analyticsScriptCode</span> <span class="o">=</span> <span class="sh">&lt;&lt;&lt;EOS
        (function (a,d){var s,t;s=d.createElement('script');
        s.src=a;s.async=1;
        t=d.getElementsByTagName('script')[0];
        t.parentNode.insertBefore(s,t);
        })("https://$analyticsDomain/$analyticsScript.js", document);
EOS;
</span><span class="p">}</span>

<span class="cm">/* display tag */</span>
<span class="k">echo</span> <span class="s2">"&lt;script&gt;</span><span class="nv">$analyticsScriptCode</span><span class="s2">&lt;/script&gt;"</span><span class="p">;</span>

</code></pre><pre class="highlight python tab-python"><code>
<span class="n">wip</span>

</code></pre><pre class="highlight java tab-java"><code>
<span class="n">wip</span>

</code></pre><pre class="highlight shell tab-shell"><code>
wip

</code></pre><pre class="highlight twig tab-twig"><code><span class="cp">{{</span> <span class="nv">adback_generate_scripts</span><span class="p">()</span> <span class="cp">}}</span>
</code></pre><h3 id='code-logic-2'>Code logic:</h3>
<ul>
<li><p>connect to your cache provider (here Redis)</p></li>
<li><p>get script names and URL</p></li>
<li><p>generate and display tag</p></li>
</ul>
<h2 id='3-message-script'>3) Message script</h2>
<blockquote>
<p>generate message script from cache:</p>
</blockquote>
<pre class="highlight php tab-php"><code>
<span class="cp">&lt;?php</span>

<span class="cm">/* here we use redis to cache api requests */</span>
<span class="nv">$cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Redis</span><span class="p">();</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">'host'</span><span class="p">);</span>

<span class="nv">$messageCode</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">'scriptElement'</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$scriptElements</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">hGetAll</span><span class="p">(</span><span class="s1">'scriptElement'</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'message_script'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$messageDomain</span> <span class="o">=</span> <span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'message_domain'</span><span class="p">];</span>
        <span class="nv">$messageScript</span> <span class="o">=</span> <span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'message_script'</span><span class="p">];</span>
        <span class="nv">$messageCode</span> <span class="o">=</span> <span class="sh">&lt;&lt;&lt;EOS
        (function (a,d){var s,t;s=d.createElement(‘script’);
        s.src=a;s.async=1;
        t=d.getElementsByTagName('script')[0];
        t.parentNode.insertBefore(s,t);
        })("https://$messageDomain/$messageScript.js", document);
EOS;
</span>    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* display tag */</span>
<span class="k">echo</span> <span class="s2">"&lt;script&gt;</span><span class="nv">$messageCode</span><span class="s2">&lt;/script&gt;"</span><span class="p">;</span>

<span class="cm">/* script you can set to display message on certain pages of your site (Perimeter) (not required) */</span>
<span class="k">echo</span> <span class="s2">"&lt;script&gt;var adback = adback || {}; adback.perimeter = 'test';&lt;/script&gt;"</span><span class="p">;</span>

</code></pre><pre class="highlight python tab-python"><code>
<span class="n">wip</span>

</code></pre><pre class="highlight java tab-java"><code>
<span class="n">wip</span>

</code></pre><pre class="highlight shell tab-shell"><code>
wip

</code></pre><pre class="highlight twig tab-twig"><code><span class="c">&lt;!-- Make sure to include it only once --&gt;</span>
<span class="cp">{{</span> <span class="nv">adback_generate_scripts</span><span class="p">()</span> <span class="cp">}}</span>
</code></pre><h3 id='script-parameters'>Script Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>Adback.perimeter</td>
<td>No</td>
<td>Variable you can set to display message on certain pages of your site, perimeter can be configured <a href="https://www.adback.co/en/monitoring/custom">here</a></td>
</tr>
</tbody></table>

<p><img src="images/perimeter_message.png" alt="message perimeter" /></p>
<h3 id='code-logic-3'>Code logic:</h3>
<ul>
<li><p>connect to your cache provider (here Redis)</p></li>
<li><p>get script names and URL</p></li>
<li><p>generate and display tag</p></li>
</ul>

<aside class="notice">You should configure your message after tag installation, <a href="https://www.adback.co/en/monitoring/custom">here</a>
you can see a preview of all your messages and publish / unpublish it</aside>
<h2 id='4-autopromo-banner-script'>4) Autopromo banner script</h2>
<blockquote>
<p>generate autopromo banner script from cache:</p>
</blockquote>
<pre class="highlight php tab-php"><code>
<span class="cp">&lt;?php</span>

<span class="cm">/* here we use redis to cache api requests */</span>
<span class="nv">$cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Redis</span><span class="p">();</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">'host'</span><span class="p">);</span>

<span class="nv">$autopromoBannerCode</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">'scriptElement'</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$scriptElements</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">hGetAll</span><span class="p">(</span><span class="s1">'scriptElement'</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'autopromo_banner_script'</span><span class="p">]))</span> <span class="p">{</span>
    <span class="nv">$autopromoBannerDomain</span> <span class="o">=</span> <span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'autopromo_banner_domain'</span><span class="p">];</span>
    <span class="nv">$autopromoBannerScript</span> <span class="o">=</span> <span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'autopromo_banner_script'</span><span class="p">];</span>
    <span class="nv">$autopromoBannerCode</span> <span class="o">=</span> <span class="sh">&lt;&lt;&lt;EOS
        (function (a,d){var s,t;s=d.createElement('script');
        s.src=a;s.async=1;
        t=d.getElementsByTagName('script')[0];
        t.parentNode.insertBefore(s,t);
        })("https://$autopromoBannerDomain/$autopromoBannerScript.js", document);
EOS;
</span>    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* add div where you want to display your banner 1 */</span>
<span class="k">echo</span> <span class="s2">"&lt;div data-tag='perimeter1 (required)'&gt;&lt;/div&gt;"</span><span class="p">;</span>

<span class="cm">/* add div where you want to display your banner 2 */</span>
<span class="k">echo</span> <span class="s2">"&lt;div data-tag='perimeter2 (required)'&gt;&lt;/div&gt;"</span><span class="p">;</span>

<span class="cm">/* display tag */</span>
<span class="k">echo</span> <span class="s2">"&lt;script&gt;</span><span class="nv">$autopromoBannerCode</span><span class="s2">&lt;/script&gt;"</span><span class="p">;</span>

</code></pre><pre class="highlight python tab-python"><code>
<span class="n">wip</span>

</code></pre><pre class="highlight java tab-java"><code>
<span class="n">wip</span>

</code></pre><pre class="highlight shell tab-shell"><code>
wip

</code></pre><pre class="highlight twig tab-twig"><code><span class="c">&lt;!-- add div where you want to display your banner 1 --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">data-tag=</span><span class="s">'perimeter1 (required)'</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="c">&lt;!-- add div where you want to display your banner 2 --&gt;</span>
<span class="nt">&lt;div</span> <span class="na">data-tag=</span><span class="s">'perimeter2 (required)'</span><span class="nt">&gt;&lt;/div&gt;</span>

<span class="cp">{{</span> <span class="nv">adback_generate_autopromo_banner_script</span><span class="p">()</span> <span class="cp">}}</span>
</code></pre>
<p><img src="images/autopromo.png" alt="Autopromo" /></p>
<h3 id='script-parameters-2'>Script Parameters</h3>
<table><thead>
<tr>
<th>Parameter</th>
<th>Required</th>
<th>Description</th>
</tr>
</thead><tbody>
<tr>
<td>data-tag=&#39;&#39;</td>
<td>Yes</td>
<td>Variable you must set to display one banner, data-tag takes one &quot;perimeter&quot; and can be configured <a href="https://www.adback.co/en/autopromo/banners">here</a></td>
</tr>
</tbody></table>

<p><img src="images/perimeter_autopromo.png" alt="Autopromo perimeter" /></p>
<h3 id='code-logic-4'>Code logic:</h3>
<ul>
<li><p>connect to your cache provider (here Redis)</p></li>
<li><p>get script names and URL</p></li>
<li><p>generate and display tag with one perimeter / banner</p></li>
</ul>

<aside class="notice">You should create a new banner after tag installation <a href="https://www.adback.co/en/autopromo/banners">here</a></aside>
<h2 id='5-product-flow-script'>5) Product flow script</h2>
<blockquote>
<p>generate product flow script from cache:</p>
</blockquote>
<pre class="highlight php tab-php"><code>
<span class="cp">&lt;?php</span>

<span class="cm">/* here we use redis to cache api requests */</span>
<span class="nv">$cache</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Redis</span><span class="p">();</span>
<span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">connect</span><span class="p">(</span><span class="s1">'host'</span><span class="p">);</span>

<span class="nv">$productFlowCode</span> <span class="o">=</span> <span class="s1">''</span><span class="p">;</span>
<span class="k">if</span> <span class="p">(</span><span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">has</span><span class="p">(</span><span class="s1">'scriptElement'</span><span class="p">))</span> <span class="p">{</span>
    <span class="nv">$scriptElements</span> <span class="o">=</span> <span class="nv">$cache</span><span class="o">-&gt;</span><span class="na">hGetAll</span><span class="p">(</span><span class="s1">'scriptElement'</span><span class="p">);</span>
    <span class="k">if</span> <span class="p">(</span><span class="nb">isset</span><span class="p">(</span><span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'product_script'</span><span class="p">]))</span> <span class="p">{</span>
        <span class="nv">$productDomain</span> <span class="o">=</span> <span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'product_domain'</span><span class="p">];</span>
        <span class="nv">$productScript</span> <span class="o">=</span> <span class="nv">$scriptElements</span><span class="p">[</span><span class="s1">'product_script'</span><span class="p">];</span>
        <span class="nv">$productFlowCode</span> <span class="o">=</span> <span class="sh">&lt;&lt;&lt;EOS
        (function (a,d){var s,t;s=d.createElement(‘script’);
        s.src=a;s.async=1;
        t=d.getElementsByTagName('script')[0];
        t.parentNode.insertBefore(s,t);
        })("https://$productDomain/$productScript.js", document);
EOS;
</span>    <span class="p">}</span>
<span class="p">}</span>

<span class="cm">/* display product flow script */</span>
<span class="k">echo</span> <span class="s2">"&lt;script&gt;</span><span class="nv">$productFlowCode</span><span class="s2">&lt;/script&gt;"</span><span class="p">;</span>

</code></pre><pre class="highlight python tab-python"><code>
<span class="n">wip</span>

</code></pre><pre class="highlight java tab-java"><code>
<span class="n">wip</span>

</code></pre><pre class="highlight shell tab-shell"><code>
wip

</code></pre><pre class="highlight twig tab-twig"><code><span class="cp">{{</span> <span class="nv">adback_generate_product_script</span><span class="p">()</span> <span class="cp">}}</span>
</code></pre><h3 id='code-logic-5'>Code logic:</h3>
<ul>
<li><p>connect to your cache provider (here Redis)</p></li>
<li><p>get script names and URL</p></li>
<li><p>generate and display tag</p></li>
</ul>

<aside class="notice">You should contact our sales team to activate the product flow after tag installation at <a href="mailto:support@adback.co">support@adback.co</a></aside>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="php">php</a>
                <a href="#" data-language-name="python">python</a>
                <a href="#" data-language-name="java">java</a>
                <a href="#" data-language-name="shell">shell</a>
                <a href="#" data-language-name="twig">twig</a>
          </div>
      </div>
    </div>
  </body>
</html>
